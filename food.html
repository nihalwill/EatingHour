<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Search Food and Drinks</title>
    <style type="text/css">
      button,
      div,
      form,
      input {
        margin: 10px;
      }
    </style>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
       <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <link rel="stylesheet" href="./Assets/skeleton.css">
    <link rel="stylesheet" href="../src/skeleton.css">
    <link rel="stylesheet" href="./Assets/foodStyle.css">
    <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./Assets/materialize.css">
    <link rel="stylesheet" href="./Assets/materialize.min.css">
  </head>

  <body>
    <div id="page-wrap">
    <nav>
    <div class="nav-wrapper">
      <a href="food.html" class="brand-logo">Logo</a>
      <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
      <ul class="right hide-on-med-and-down">
        <li><a href="aboutUs.html">About Us</a></li>
        <li><a href="badges.html">Components</a></li>
      </ul>
    </div>
  </nav>

  <ul class="sidenav" id="mobile-demo">
    <li><a href="sass.html">Sass</a></li>
    <li><a href="badges.html">Components</a></li>
    <li><a href="collapsible.html">Javascript</a></li>
    <li><a href="mobile.html">Mobile</a></li>
  </ul>
          
      </div>
                
      <h1>Food Search</h1>
      <div class="container">
        "Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim 
      </div>

      <!-- Rendered Buttons will get Dumped Here  -->
      <div id="buttons-view"></div>

      <form id="movie-form">
        <label for="movie-input">Search for a Food</label>
        <input type="text" id="food-input" placeholder="Enter Food Here" />
        <br />

        <!-- Button triggers new movie to be added -->
        <input class='button' id="add-food" type="submit" value="Get info" />
        <button class='button' id="random-food">Random Food</button>
        <button  class='button'id="clear-food">Clear Food</button>
      </form>

      <!-- Movies will Get Dumped Here -->
      <div id="food-view"></div>
    </div>
    </body>

      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
      <script type="text/javascript">
        // Initial array of food
        var food = [];

        // displayMovieInfo function re-renders the HTML to display the appropriate content
        function displayFoodInfo() {
          var newFood = $("#food-input").val().trim();
          var queryURL =
            "https://www.themealdb.com/api/json/v1/1/search.php?s=" + newFood;
          console.log("queryURL:", queryURL);

          // Creating an AJAX call for the specific movie button being clicked
          $.ajax({
            url: queryURL,
            method: "GET",
          }).then(function (response) {
            console.log("response:", response);

            // Creating a div to hold the movie
            var foodDiv = $("<div class='food'>");

            // Storing the rating data
            var country = response.meals[0].strArea;
            var video = response.meals[0].strYoutube;
            var image = response.meals[0].strMealThumb;
            var imagePic = $("<img>").attr("src", image);
            imagePic.addClass("foodPic");
            console.log("image:", image);

            // Creating an element to have the rating displayed
            var pOne = $("<p>").text("Meal Origin: " + country);
            var pTwo = $("<p>").text("Meal Video: ");
            var aTag = $("<a>").attr("href", video).text("Recipe Video");
            pTwo.append(aTag);
            var pThree = $("<p>").text();

            var link = $("<a>");
            link.attr("href", video); //set href
            link.innerHTML = video; //set text to be seen
            pTwo.append(link); //add to body

            // Displaying the rating
            foodDiv.append(pOne);
            foodDiv.append(pTwo);
            foodDiv.append(pThree);
            foodDiv.append(imagePic);
            $("#food-view").prepend(foodDiv);
          });
        }

        function randomFood() {
          var queryURL = "https://www.themealdb.com/api/json/v1/1/random.php";
          console.log("queryURL:", queryURL);

          // Creating an AJAX call for the specific movie button being clicked
          $.ajax({
            url: queryURL,
            method: "GET",
          }).then(function (response) {
            console.log("response:", response);
            var category = response.meals[0].strCategory;
            var rpOne = $("<p>").text("Meal Category: " + category);

            // Creating a div to hold the movie
            var randomFoodDiv = $("<div class='randomFood'>");
            randomFoodDiv.append(rpOne);
            $("#food-view").prepend(randomFoodDiv);
          });
        }

        function clearFood() {
          $("#food-view").empty();
        }

        // This function handles events where a movie button is clicked

        $("#add-food").on("click", function (event) {
          event.preventDefault();
          displayFoodInfo();
          $("#food-input").val("");
          // This line grabs the input from the textbox
        });
        $("#random-food").on("click", function (event) {
          event.preventDefault();
          randomFood();
          // This line grabs the input from the textbox
        });

        $("#clearfood").on("click", function (event) {
          event.preventDefault();
          clearFood();
          // This line grabs the input from the textbox

          // navbar addition 

  $(document).ready(function(){
    $('.sidenav').sidenav();
  });
        
        });
      </script>
    </div>
  </body>
</html>